# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

name = "invoice-generator"
client_id = "" # Will be filled after creating the app
application_url = "https://your-backend-url.railway.app"
embedded = true

[build]
automatically_update_urls_on_dev = true
dev_store_url = "your-dev-store.myshopify.com"

[access_scopes]
# https://shopify.dev/docs/api/usage/access-scopes
scopes = "read_products,read_orders,write_draft_orders,read_customers,write_orders,read_inventory,write_inventory"

[auth]
redirect_urls = [
  "https://your-backend-url.railway.app/auth/callback",
  "https://your-backend-url.railway.app/auth/shopify/callback",
  "http://localhost:3001/auth/callback"
]

[webhooks]
api_version = "2025-01"

# Order webhooks for automatic invoice generation
[[webhooks.subscriptions]]
topics = [ "orders/create" ]
uri = "/webhooks/orders/create"

[[webhooks.subscriptions]]
topics = [ "orders/paid" ]
uri = "/webhooks/orders/paid"

[[webhooks.subscriptions]]
topics = [ "orders/updated" ]
uri = "/webhooks/orders/updated"

# Subscription webhooks for billing
[[webhooks.subscriptions]]
topics = [ "app_subscriptions/update" ]
uri = "/webhooks/app_subscriptions/update"

# GDPR webhooks (required for app approval)
[[webhooks.subscriptions]]
topics = [ "customers/data_request" ]
uri = "/webhooks/gdpr/customers_data_request"

[[webhooks.subscriptions]]
topics = [ "customers/redact" ]
uri = "/webhooks/gdpr/customers_redact"

[[webhooks.subscriptions]]
topics = [ "shop/redact" ]
uri = "/webhooks/gdpr/shop_redact"

[pos]
embedded = false
